#!/bin/bash

echo "üöÄ –ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ"
echo "============================================="

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º—ã –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –≤–µ—Ç–∫–µ
CURRENT_BRANCH=$(git branch --show-current)
echo "üìã –¢–µ–∫—É—â–∞—è –≤–µ—Ç–∫–∞: $CURRENT_BRANCH"

if [ "$CURRENT_BRANCH" != "coins" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: –ù—É–∂–Ω–æ –±—ã—Ç—å –Ω–∞ –≤–µ—Ç–∫–µ 'coins'"
    echo "üí° –í—ã–ø–æ–ª–Ω–∏—Ç–µ: git checkout coins"
    exit 1
fi

echo "‚úÖ –ú—ã –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –≤–µ—Ç–∫–µ: $CURRENT_BRANCH"

# –ü—É—à–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ GitHub
echo ""
echo "üì§ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ GitHub..."
git add .
git commit -m "–§–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –æ –≤–µ—Å–µ"
git push origin coins

echo ""
echo "‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ GitHub"
echo ""
echo "üìã –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:"
echo "===================================="
echo ""
echo "1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É:"
echo "   ssh root@46.173.19.68"
echo ""
echo "2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:"
echo "   cd /root/wolmar-parser"
echo "   git fetch origin"
echo "   git checkout coins"
echo "   git pull origin coins"
echo "   pm2 stop catalog 2>/dev/null"
echo "   pm2 start catalog-server.js --name catalog"
echo "   pm2 status"
echo ""
echo "3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É:"
echo "   - –û—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç: http://46.173.19.68:3001"
echo "   - –ö–∞—Ç–∞–ª–æ–≥: http://46.173.19.68:3000"
echo ""
echo "‚ö†Ô∏è  –í–ê–ñ–ù–û: –û—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç –¥–æ–ª–∂–µ–Ω –æ—Å—Ç–∞—Ç—å—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 3001!"
echo "‚ö†Ô∏è  –ö–∞—Ç–∞–ª–æ–≥ –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –ø–æ—Ä—Ç—É 3000!"
echo ""
echo "üîß –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥–µ—Ç –Ω–µ —Ç–∞–∫:"
echo "   pm2 stop catalog"
echo "   pm2 restart wolmar-parser"


